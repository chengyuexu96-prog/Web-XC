<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>我的案头 - 瓷韵中华</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/profile.css">
</head>
<body>
    
    <%- include('partials/header') %>

    <div id="tsparticles"></div>

    <div style="height: 60px;"></div>

    <div class="profile-header">
        <input type="file" id="avatarInput" style="display: none;" accept="image/*">
        
        <div class="avatar-container" onclick="document.getElementById('avatarInput').click()">
            <img id="userAvatarImg" class="avatar-lg" style="display:none;">
            <div id="userAvatarTxt" class="avatar-lg">瓷</div>
            <div class="avatar-overlay"><i class="bi bi-camera"></i> 更换</div>
        </div>
        
        <h2 id="userName" class="mb-2" style="font-family: 'Ma Shan Zheng'; letter-spacing: 2px;">User</h2>
        <div class="d-flex justify-content-center mb-3">
            <span class="info-badge"><i class="bi bi-envelope"></i> <span id="userEmail">--</span></span>
            <span class="info-badge"><i class="bi bi-calendar-check"></i> 入籍: <span id="joinDate">--</span></span>
        </div>
        
        <div class="stats-row">
            <div class="stat-item"><div class="stat-num" id="statLikes">0</div><div class="stat-label">获赞</div></div>
            <div class="stat-item"><div class="stat-num" id="statFavs">0</div><div class="stat-label">被收藏</div></div>
        </div>
    </div>

    <div class="container">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#posts">我的发布</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#favorites">我的收藏</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#following">我的关注</button>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade show active" id="posts"><div class="masonry-container" id="myPostsContainer"></div></div>
            <div class="tab-pane fade" id="favorites"><div class="masonry-container" id="myFavsContainer"></div></div>
            <div class="tab-pane fade" id="following"><div class="row justify-content-center"><div class="col-md-8" id="myFollowContainer"></div></div></div>
        </div>
    </div>

    <%- include('partials/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.0.6/tsparticles.slim.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/common.js"></script>
    <script>const currentUser = JSON.parse('<%- JSON.stringify(user) %>');</script>
    <script src="/js/profile.js"></script>
</body>
</html>